###################### Filebeat Configuration Example #########################

# This file is an example configuration file highlighting only the most common
# options. The filebeat.reference.yml file from the same directory contains all the
# supported options with more comments. You can use it as a reference.
#
# You can find the full configuration reference here:
# https://www.elastic.co/guide/en/beats/filebeat/index.html

# For more available modules and options, please see the filebeat.reference.yml sample
# configuration file.

# ============================== Filebeat inputs ===============================

filebeat.inputs:

# Each - is an input. Most options can be set at the input level, so
# you can use different inputs for various configurations.
# Below are the input specific configurations.

- type: httpjsonv2
  interval: 10s
  request.method: post
  request.url: https://patata.free.beeceptor.com
  request.transforms:
    - set:
        target: body.foo
        value: bazz
  response.transforms:
    - set:
        target: body.foo
        value: patata
  response.pagination:
    - set:
        target: url.value
        value: "https://patata.free.beeceptor.com/page"
    - set:
        target: url.params.p
        value: "{{.last_response.body.page}}"
  response.split:
    target: body.foo
    type: array|map
    transforms:
      - ...
    split:


# limit split to be last (and to be just one)
# split can't have split transform itself
# iterate over maps or arrays dynamically
# keys_field to keep value of the key if a map is found
# add option to keep headers between redirects

# {
#   "bar": [
#     {
#       "bazz": {
#         "somekey": [
#           "bazinga": {
#             "key": "value"
#           }
#         ]
#       }
#     }
#   ]
# }

output.console:
  pretty: true
