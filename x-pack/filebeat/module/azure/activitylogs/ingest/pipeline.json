{
  "description": "Pipeline for parsing azure activity logs.",
  "processors": [
    {
    "foreach": {
      "field": "records",
      "processor" : {
        "uppercase" : {
          "field" : "_ingest._value.category"
        }
      }
    }
  },
    {
      "remove": {
        "field":"message",
        "ignore_missing": true
      }
    }
  ],
  "on_failure": [
  {
    "set": {
      "field": "error.message",
      "value": "{{ _ingest.on_failure_message }}"
    }
  }
  ]
}
