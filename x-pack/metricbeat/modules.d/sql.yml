# Module: sql
# Docs: https://www.elastic.co/guide/en/beats/metricbeat/main/metricbeat-module-sql.html

- module: sql
  metricsets:
    - query
  period: 10s
  hosts: ["postgres://postgres:post@localhost?sslmode=disable"]

  driver: "postgres"
  raw_data.enabled: true
  request_merge: true
  sql_queries:
    - query: "SELECT datid, datname FROM pg_stat_database limit 1;"
      response_format: table
    - query: "SELECT blks_hit, tup_returned, tup_fetched FROM pg_stat_database limit 1;"
      response_format: table
    - query: "SELECT stats_reset FROM pg_stat_database limit 1;"
      response_format: table
    - query: "SELECT 'blks_read' AS name , blks_read FROM pg_stat_database"
      response_format: variables
