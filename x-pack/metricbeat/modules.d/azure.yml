- module: azure
  metricsets:
  - monitor
  enabled: true
  period: 60s
  client_id: ''
  client_secret: ''
  tenant_id: ''
  subscription_id: ''
  refresh_list_interval: 120s
  resources:
  - resource_id: "subscriptions/xxxxx/resourceGroups/obs-infrastructure/providers/Microsoft.ApiManagement/service/obsapimanagement11"
    metrics:
    - name: "Requests"
      namespace: "Microsoft.ApiManagement/service"
      aggregations: ["Maximum"]
      dimensions:
      - name: "Hostname"
        value: "obsapimanagement.azure-api.net"
    - name: ["Capacity", "Requests"]
      namespace: "Microsoft.ApiManagement/service"
      aggregations: ["Average"]
      dimensions:
      - name: "Location"
        value: "West Europe"
  - resource_group: "obs-infrastructure"
    resource_type: "Microsoft.Compute/virtualMachines"
    metrics:
    - name: "Percentage CPU"
      namespace: "Microsoft.Compute/virtualMachines"
      aggregations: ["Average", "Minimum", "Maximum"]
    - name: ["Disk Read Bytes", "Data Disk Write Operations/Sec", "Network Out"]
      namespace: "Microsoft.Compute/virtualMachines"
      aggregations: ["Average", "Maximum"]
  - resource_query: "resourceType eq 'Microsoft.Storage/storageAccounts' and resourceGroup eq 'obs-infrastructure'"
    metrics:
    - name: ["*"]
      namespace: "Microsoft.Storage/storageAccounts"
      aggregations:  ["Total", "Average"]


