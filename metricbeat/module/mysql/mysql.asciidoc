[[metricbeat-mysql-module]]
== MySQL Module

This modules periodically fetches metrics from https://www.mysql.com/[MySQL]
servers.

=== Configuration

The MySQL module supports the standard configuration options which can be found
here (add link).

A basic configuration for the mysql module with the status metricset enabled
is as follows:

[source,yaml]
----
metricbeat:
  modules:
    - module: mysql
      metricsets: ["status"]
      period: 10s
      hosts: ["root@tcp(127.0.0.1:3306)/"]
----

The host must be passed as a MySQL Data Source Name (DSN). The format of the
DSN is as following:

----
[username[:password]@][protocol[(address)]]/
----

=== MetricSets

==== MySQL Status

The MySQL module has one MetricSet that is called `mysql-status`. This metricset
collects data from MySQL by running a
http://dev.mysql.com/doc/refman/5.7/en/show-status.html[`SHOW GLOBAL STATUS;`]
SQL query. This query returns a large number or metrics. A
description of each field in the MetricSet can be found in the
<<exported-fields-mysql,exported fields>> section.

Below is an example document generated by this metricset.

[source,json]
----
{
  "@timestamp": "2016-04-18T12:16:13.382Z",
  "beat": {
    "hostname": "example.com",
    "name": "example.com"
  },
  "metricset": "status",
  "module": "mysql",
  "mysql-status": {
    "Connections": 690,
    "Flush_commands": 2,
    "Max_used_connections": 2,
    "aborted": {
      "Aborted_clients": 88,
      "Aborted_connects": 597
    },
    "binlog": {
      "Binlog_cache_disk_use": 0,
      "Binlog_cache_use": 0
    },
    "bytes": {
      "Bytes_received": 549749,
      "Bytes_sent": 144506849
    },
    "created": {
      "Created_tmp_disk_tables": 1,
      "Created_tmp_files": 5,
      "Created_tmp_tables": 2
    },
    "delayed": {
      "Delayed_errors": 0,
      "Delayed_insert_threads": 0,
      "Delayed_writes": 0
    },
    "open": {
      "Open_files": 0,
      "Open_streams": 0,
      "Open_tables": 15,
      "Opened_tables": 142
    }
  },
  "rtt": 4861,
  "type": "metricsets"
}
----
