- name: syncgateway
  type: group
  description: >
    Couchbase Sync Gateway metrics.
  release: ga
  fields:
    - name: type
      type: keyword
      description: >
        Type can be `db_stats` for the main metrics related to each database, `mem_stats` for the metrics related to the
        memory usage of the database, `global_stats` for system metrics of SyncGateway and `replication_stats` for
        replication related metrics.
    - name: replication
      type: group
      description: Information about the replicas
      fields:
        - name: metrics
          type: group
          description: Metrics related with data replication.
          fields:
            - name: attachment
              type: group
              fields:
                - name: transferred
                  type: group
                  fields:
                    - name: bytes
                      type: long
                      description: Number of attachment bytes transferred for this replica.
                    - name: count
                      type: long
                      description: The total number of attachments transferred since replication started.
            - name: docs
              type: group
              fields:
                - name: checked_sent
                  type: double
                  description: The total number of documents checked for changes since replication started.
                - name: pushed
                  type: group
                  fields:
                    - name: count
                      type: long
                      description: The total number of documents checked for changes since replication started.
                    - name: failed
                      type: long
                      description: The total number of documents that failed to be pushed since replication started.
        - name: id
          type: keyword
          description: ID of the replica.
    - name: global_resource_utilization
      type: group
      fields:
        - name: error_count
          type: long
        - name: goroutines_high_watermark
          type: long
        - name: num_goroutines
          type: long
        - name: process
          type: group
          fields:
            - name: cpu_percent_utilization
              type: long
            - name: memory_resident
              type: long
        - name: pub_net
          type: group
          fields:
            - name: recv
              type: group
              fields:
                - name: bytes
                  type: long
            - name: sent
              type: group
              fields:
                - name: bytes
                  type: long
        - name: admin_net_bytes
          type: group
          fields:
            - name: recv
              type: long
            - name: sent
              type: long
        - name: go_memstats
          type: group
          fields:
            - name: heap
              type: group
              fields:
                - name: alloc
                  type: long
                - name: idle
                  type: long
                - name: inuse
                  type: long
                - name: released
                  type: long
            - name: pause
              type: group
              fields:
                - name: ns
                  type: long
            - name: stack
              type: group
              fields:
                - name: inuse
                  type: long
                - name: sys
                  type: long
            - name: sys
              type: long
        - name: system_memory_total
          type: long
        - name: warn_count
          type: long
    - name: db
      type: group
      description: Metrics of all databases contained in the config file of the SyncGateway instance.
      fields:
        - name: name
          type: keyword
          description: >
            Name of the database on when field `couchbase.syncgateway.type` is `db_stats`.
        - name: docs
          type: group
          fields:
            - name: writes
              type: group
              fields:
                - name: conflict.count
                  type: long
                - name: count
                  type: long
                - name: bytes
                  type: long
        - name: replications
          type: group
          fields:
            - name: active
              type: long
              description: Number of active replications
            - name: total
              type: long
              description: Total number of replications (active or not)
    - name: gsi
      type: group
      fields:
        - name: views
          type: group
          fields:
            - name: tombstones
              type: group
              fields:
                - name: query
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: error
                      type: group
                      fields:
                        - name: count
                          type: double
                    - name: time
                      type: double
            - name: access
              type: group
              fields:
                - name: query
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: error
                      type: group
                      fields:
                        - name: count
                          type: double
                    - name: time
                      type: double
            - name: channels
              type: group
              fields:
                - name: query
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: error
                      type: group
                      fields:
                        - name: count
                          type: double
                    - name: time
                      type: double
                - name: star
                  type: group
                  fields:
                    - name: query
                      type: group
                      fields:
                        - name: time
                          type: double
                        - name: count
                          type: double
                        - name: error
                          type: group
                          fields:
                            - name: count
                              type: double
            - name: role_access
              type: group
              fields:
                - name: query
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: error
                      type: group
                      fields:
                        - name: count
                          type: double
                    - name: time
                      type: double
            - name: sequences
              type: group
              fields:
                - name: query
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: error
                      type: group
                      fields:
                        - name: count
                          type: double
                    - name: time
                      type: double
            - name: all_docs
              type: group
              fields:
                - name: query
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: error
                      type: group
                      fields:
                        - name: count
                          type: double
                    - name: time
                      type: double
            - name: principals
              type: group
              fields:
                - name: query
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: error
                      type: group
                      fields:
                        - name: count
                          type: double
                    - name: time
                      type: double
            - name: resync
              type: group
              fields:
                - name: query
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: error
                      type: group
                      fields:
                        - name: count
                          type: double
                    - name: time
                      type: double
            - name: sessions
              type: group
              fields:
                - name: query
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: error
                      type: group
                      fields:
                        - name: count
                          type: double
                    - name: time
                      type: double
    - name: security
      type: group
      fields:
        - name: access_errors
          type: group
          fields:
            - name: count
              type: double
        - name: auth
          type: group
          fields:
            - name: failed
              type: group
              fields:
                - name: count
                  type: double
        - name: docs_rejected
          type: group
          fields:
            - name: count
              type: double
    - name: cache
      type: group
      fields:
        - name: channel
          type: group
          fields:
            - name: revs
              type: group
              fields:
                - name: active
                  type: double
                - name: removal
                  type: double
                - name: tombstone
                  type: double
            - name: hits
              type: double
            - name: misses
              type: double
        - name: revs
          type: group
          fields:
            - name: hits
              type: double
            - name: misses
              type: double
    - name: cbl
      type: group
      fields:
        - name: replication
          type: group
          fields:
            - name: pull
              type: group
              fields:
                - name: since_zero
                  type: double
                - name: total
                  type: group
                  fields:
                    - name: continuous
                      type: double
                    - name: one_shot
                      type: double
                - name: active
                  type: group
                  fields:
                    - name: continuous
                      type: double
                    - name: count
                      type: double
                    - name: one_shot
                      type: double
                - name: attachment
                  type: group
                  fields:
                    - name: bytes
                      type: double
                    - name: count
                      type: double
                - name: caught_up
                  type: double
                - name: request_changes
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: time
                      type: double
                - name: rev
                  type: group
                  fields:
                    - name: processing_time
                      type: double
                    - name: send
                      type: group
                      fields:
                        - name: count
                          type: double
                        - name: latency
                          type: double
            - name: push
              type: group
              fields:
                - name: attachment
                  type: group
                  fields:
                    - name: bytes
                      type: double
                    - name: count
                      type: double
                - name: doc_push_count
                  type: double
                - name: propose_change
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: time
                      type: double
                - name: sync_function
                  type: group
                  fields:
                    - name: count
                      type: double
                    - name: time
                      type: double
                - name: write_processing_time
                  type: double
    - name: memstats
      type: group
      description: Dumps a large amount of information about the memory heap and garbage collector
      fields:
        - name: BuckHashSys
          type: double
        - name: Mallocs
          type: double
        - name: PauseTotalNs
          type: double
        - name: TotalAlloc
          type: double
        - name: Alloc
          type: double
        - name: GCSys
          type: double
        - name: LastGC
          type: double
        - name: MSpanSys
          type: double
        - name: GCCPUFraction
          type: double
        - name: HeapReleased
          type: double
        - name: HeapSys
          type: double
        - name: DebugGC
          type: long
        - name: HeapIdle
          type: double
        - name: Lookups
          type: double
        - name: HeapObjects
          type: double
        - name: MSpanInuse
          type: double
        - name: NumForcedGC
          type: double
        - name: OtherSys
          type: double
        - name: Frees
          type: double
        - name: NextGC
          type: double
        - name: StackInuse
          type: double
        - name: Sys
          type: double
        - name: NumGC
          type: double
        - name: EnableGC
          type: long
        - name: HeapAlloc
          type: double
        - name: MCacheInuse
          type: double
        - name: MCacheSys
          type: double
        - name: HeapInuse
          type: double
        - name: StackSys
          type: double
