- name: apiserver
  type: group
  description: >
    Kubernetes API server metrics
  release: ga
  fields:
    - name: client
      type: keyword
      description: >
        Client doing the requests
    - name: resource
      type: keyword
      description: >
        Requested resource
    - name: subresource
      type: keyword
      description: >
        Requested subresource
    - name: scope
      type: keyword
      description: >
        Request scope (cluster, namespace, resource)
    - name: verb
      type: keyword
      description: >
        Request HTTP verb
    - name: code
      type: keyword
      description: >
        Request HTTP code
    - name: content_type
      type: keyword
      description: >
        Request HTTP content type
    - name: dry_run
      type: keyword
      description: >
        Wether the request used dry run
    - name: kind
      type: keyword
      description: >
        Kind of request
    - name: component
      type: keyword
      description: >
        Component handling the task
    - name: group
      type: keyword
      description: >
        API group for the resource
    - name: version
      type: keyword
      description: >
        version for the group
    - name: handler
      type: keyword
      description: >
        Request handler
    - name: code
      type: keyword
      description: >
        HTTP code
    - name: method
      type: keyword
      description: >
        HTTP method
    - name: host
      type: keyword
      description: >
        Request host

    - name: process
      type: group
      fields:
        - name: cpu.sec
          type: scaled_float
          description: CPU seconds
        - name: memory.resident.bytes
          type: long
          description: Bytes in resident memory
        - name: memory.virtual.bytes
          type: long
          description: Bytes in virtual memory
        - name: fds.open.count
          type: integer
          description: Number of open file descriptors
        - name: started.sec
          type: scaled_float
          description: Seconds since the process started

    - name: http
      type: group
      fields:
        - name: request.duration.us.percentile.*
          type: scaled_float
          description: Request duration microseconds percentiles
        - name: request.duration.us.sum
          type: scaled_float
          description: Request duration microseconds cumulative sum
        - name: request.duration.us.count
          type: long
          description: Request count for duration
        - name: request.size.bytes.percentile.*
          type: integer
          description: Request size percentiles
        - name: request.size.bytes.sum
          type: long
          description: Request size cumulative sum
        - name: request.size.bytes.count
          type: long
          description: Request count for size
        - name: response.size.bytes.percentile.*
          type: integer
          description: Response size percentiles
        - name: response.size.bytes.sum
          type: long
          description: Response size cumulative sum
        - name: response.size.bytes.count
          type: long
          description: Response count
        - name: request.count
          type: long
          description: Request count for response

    - name: client.request.count
      type: long
      description: >
       Number of requests as client

    - name: request.count
      type: long
      description: >
        Total number of requests
    - name: request.latency.sum
      type: long
      description: >
        Requests latency, sum of latencies in microseconds
    - name: request.latency.count
      type: long
      description: >
        Request latency, number of requests
    - name: request.latency.bucket.*
      type: object
      object_type: long
      description: >
        Request latency histogram buckets
    - name: request.current.count
      type: long
      description: >
        Inflight requests
    - name: request.longrunning.count
      type: long
      description: >
        Number of requests active long running requests
    - name: etcd.object.count
      type: long
      description: >
        Number of kubernetes objects at etcd
    - name: audit.event.count
      type: long
      description: >
        Number of audit events
    - name: audit.rejected.count
      type: long
      description: >
        Number of audit rejected events

