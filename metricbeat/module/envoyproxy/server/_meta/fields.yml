- name: server
  type: group
  description: >
    Contains envoy proxy server stats
  fields:
    - name: cluster_manager
      type: group
      fields:
        - name: active_clusters 
          type: integer
          description: >
            Number of currently active (warmed) clusters
        - name: cluster_added
          type: integer
          description: >
            Total clusters added (either via static config or CDS)
        - name: cluster_modified
          type: integer
          description: >
            Total clusters modified (via CDS)
        - name: cluster_removed
          type: integer
          description: >
            Total clusters removed (via CDS)
        - name: warming_clusters
          type: integer
          description: >
            Number of currently warming (not active) clusters

    - name: filesystem
      type: group
      fields:
        - name: flushed_by_timer
          type: integer
          description: >
            Total number of times internal flush buffers are written to a file due to flush timeout
        - name: reopen_failed
          type: integer
          description: >
            Total number of times a file was failed to be opened
        - name: write_buffered
          type: integer
          description: >
            Total number of times file data is moved to Envoys internal flush buffer
        - name: write_completed
          type: integer
          description: >
            Total number of times a file was written
        - name: write_total_buffered 
          type: integer
          description: >
            Current total size of internal flush buffer in bytes

    - name: runtime
      type: group
      fields:
        - name: admin_overrides_active
          type: integer
        - name: load_error
          type: integer
          description: >
            Total number of load attempts that resulted in an error
        - name: load_success
          type: integer
          description: >
            Total number of load attempts that were successful
        - name: num_keys 
          type: integer
          description: >
            Number of keys currently loaded
        - name: override_dir_exists
          type: integer
          description: >
            Total number of loads that did use an override directory
        - name: override_dir_not_exists
          type: integer
          description: >
            Total number of loads that did not use an override directory

    - name: listener_manager
      type: group
      fields:
        - name: listener_added
          type: integer
          description: >
            Total listeners added (either via static config or LDS)
        - name: listener_create_failure
          type: integer
          description: >
            Total failed listener object additions to workers
        - name: listener_create_success
          type: integer
          description: >
            Total listener objects successfully added to workers
        - name: listener_modified
          type: integer
          description: >
            Total listeners modified (via LDS)
        - name: listener_removed
          type: integer
          description: >
            Total listeners removed (via LDS)
        - name: total_listeners_active
          type: integer
          description: >
            Number of currently active listeners
        - name: total_listeners_draining
          type: integer
          description: >
            Number of currently draining listeners
        - name: total_listeners_warming
          type: integer
          description: >
            Number of currently warming listeners

    - name: stats
      type: group
      fields:
        - name: overflow
          type: integer
          description: >
            Total number of times Envoy cannot allocate a statistic due to a shortage of shared memory

    - name: server
      type: group
      fields:      
        - name: days_until_first_cert_expiring
          type: integer
          description: >
            Number of days until the next certificate being managed will expire
        - name: live
          type: integer
          description: >
            1 if the server is not currently draining, 0 otherwise
        - name: memory_allocated
          type: integer
          description: >
            Current amount of allocated memory in bytes
        - name: memory_heap_size
          type: integer
          description: >
            Current reserved heap size in bytes
        - name: parent_connections
          type: integer
          description: >
            Total connections of the old Envoy process on hot restart
        - name: total_connections
          type: integer
          description: >
            Total connections of both new and old Envoy processes
        - name: uptime
          type: integer
          description: >
            Current server uptime in seconds
        - name: version
          type: integer
          description: >
            Integer represented version number based on SCM revision
        - name: watchdog_mega_miss
          type: integer
        - name: watchdog_miss
          type: integer

    - name: listener
      type: group
      fields:
        - name: admin
          type: group
          fields:
            - name: downstream_cx_active
              type: integer
              description: >
                Total active connections
            - name: downstream_cx_destroy
              type: integer
              description: >
                Total destroyed connections
            - name: downstream_cx_total
              type: integer
              description: >
                Total connections
            - name: http
              type: group
              fields:
                - name: admin
                  type: group
                  fields:
                    - name: downstream_rq_1xx
                      type: integer
                      description: >
                        Total 1xx responses
                    - name: downstream_rq_2xx
                      type: integer
                      description: >
                        Total 2xx responses
                    - name: downstream_rq_3xx
                      type: integer
                      description: >
                        Total 3xx responses
                    - name: downstream_rq_4xx
                      type: integer
                      description: >
                        Total 4xx responses
                    - name: downstream_rq_5xx
                      type: integer
                      description: >
                        Total 5xx responses

    - name: http
      type: group
      fields:
        - name: admin
          type: group
          fields:
            - name: downstream_cx_active
              type: integer
              description: >
                Total active connections
            - name: downstream_cx_destroy
              type: integer
              description: >
                Total connections destroyed
            - name: downstream_cx_destroy_active_rq
              type: integer
              description: >
                Total connections destroyed with active requests
            - name: downstream_cx_destroy_local
              type: integer
              description: >
                Total connections destroyed due to local close
            - name: downstream_cx_destroy_remote
              type: integer
              description: >
                Total connections destroyed due to remote close
            - name: downstream_cx_destroy_remote_active_rq
              type: integer
              description: >
                Total connections destroyed remotely with active requests
            - name: downstream_cx_drain_close
              type: integer
              description: >
                Total connections closed due to draining
            - name: downstream_cx_http1_active
              type: integer
              description: >
                Total active HTTP/1.1 connections
            - name: downstream_cx_http1_total
              type: integer
              description: >
                Total HTTP/1.1 connections
            - name: downstream_cx_http2_active
              type: integer
              description: >
                Total active HTTP/2 connections
            - name: downstream_cx_http2_total
              type: integer
              description: >
                Total HTTP/2 connections
            - name: downstream_cx_idle_timeout
              type: integer
              description: >
                Total connections closed due to idle timeout
            - name: downstream_cx_protocol_error
              type: integer
              description: >
                Total protocol errors
            - name: downstream_cx_rx_bytes_buffered
              type: integer
              description: >
                Total received bytes currently buffered
            - name: downstream_cx_rx_bytes_total
              type: integer
              description: >
                Total bytes received
            - name: downstream_cx_ssl_active
              type: integer
              description: >
                Total active TLS connections
            - name: downstream_cx_ssl_total
              type: integer
              description: >
                Total TLS connections
            - name: downstream_cx_total
              type: integer
              description: >
                Total connections
            - name: downstream_cx_tx_bytes_buffered
              type: integer
              description: >
                Total bytes currently buffered to the downstream connection
            - name: downstream_cx_tx_bytes_total
              type: integer
              description: >
                Total bytes written to the downstream connection
            - name: downstream_cx_websocket_active
              type: integer
              description: >
                Total active WebSocket connections
            - name: downstream_cx_websocket_total
              type: integer
              description: >
                    Total WebSocket connections
            - name: downstream_flow_control_paused_reading_total
              type: integer
              description: >
                Total number of times reads were disabled due to flow control
            - name: downstream_flow_control_resumed_reading_total
              type: integer
              description: >
                Total number of times reads were enabled on the connection due to flow control
            - name: downstream_rq_1xx
              type: integer
              description: >
                Total 1xx responses
            - name: downstream_rq_2xx
              type: integer
              description: >
                Total 2xx responses
            - name: downstream_rq_3xx
              type: integer
              description: >
                Total 3xx responses
            - name: downstream_rq_4xx
              type: integer
              description: >
                Total 4xx responses
            - name: downstream_rq_5xx
              type: integer
              description: >
                Total 5xx responses
            - name: downstream_rq_active
              type: integer
              description: >
                Total active requests
            - name: downstream_rq_http1_total
              type: integer
              description: >
                Total HTTP/1.1 requests
            - name: downstream_rq_http2_total
              type: integer
              description: >
                Total HTTP/2 requests
            - name: downstream_rq_non_relative_path
              type: integer
              description: >
                Total requests with a non-relative HTTP path
            - name: downstream_rq_response_before_rq_complete
              type: integer
              description: >
                Total responses sent before the request was complete
            - name: downstream_rq_rx_reset 
              type: integer
              description: >
                Total request resets received
            - name: downstream_rq_too_large
              type: integer
              description: >
                Total requests resulting in a 413 due to buffering an overly large body
            - name: downstream_rq_total
              type: integer
              description: >
                Total requests
            - name: downstream_rq_tx_reset
              type: integer
              description: >
                Total request resets sent
            - name: downstream_rq_ws_on_non_ws_route
              type: integer
              description: >
                Total WebSocket upgrade requests rejected by non WebSocket routes
            - name: rs_too_large
              type: integer
              description: >
                Total response errors due to buffering an overly large body

        - name: async-client
          type: group
          fields:
            - name: no_cluster
              type: integer
              description: >
                Total requests in which the target cluster did not exist and resulted in a 404
            - name: no_route
              type: integer
              description: >
                Total requests that had no route and resulted in a 404
            - name: rq_direct_response
              type: integer
              description: >
                Total requests that resulted in a direct response
            - name: rq_redirect
              type: integer
              description: >
                Total requests that resulted in a redirect response
            - name: rq_total
              type: integer
              description: >
                Total routed requests
