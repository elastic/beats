- module: prometheus
  period: 10s
  hosts: ["localhost:9090"]
  metricsets: ["collect"]
  metrics_path: /metrics
  #username: "user"
  #password: "secret"

  # This can be used for service account based authorization:
  #  bearer_token_file: /var/run/secrets/kubernetes.io/serviceaccount/token
  #ssl.certificate_authorities:
  #  - /var/run/secrets/kubernetes.io/serviceaccount/service-ca.crt

- module: prometheus
  period: 10s
  hosts: ["localhost:9090"]
  metricsets: ["query"]
  paths:
  - name: 'http_request'
    path: '/api/v1/query'
    fields:
      'query': sum(rate(prometheus_http_requests_total[1m]))