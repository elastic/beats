////
This file is generated! See scripts/docs_collector.py
////

:edit_url: https://github.com/elastic/beats/edit/main/x-pack/filebeat/module/salesforce/_meta/docs.asciidoc

[[filebeat-module-salesforce]]
[role="xpack"]

:modulename: salesforce
:has-dashboards: true

== Salesforce module

This is a module for Salesforce logs. 
It collects the logs using the following two different types of inputs:

- `salesforce` input: collects real-time and historical data using Salesforce REST API.

It includes the following filesets for receiving logs:

- `login` fileset: supports Salesforce Login logs received from the EventLogFile and Event Monitoring using Salesforce REST API.
- `logout` fileset: supports Salesforce Logout logs received from the EventLogFile and Event Monitoring using Salesforce REST API.
- `apex` fileset: supports Salesforce Apex logs received from the the EventLogFile using Salesforce REST API.
- `setupaudittrail` fileset: supports logs generated when admins make in your orgâ€™s Setup area, collected using Salesforce REST API.

Note: 
- We can leverage the inputs provided above to collect the rest of the events from the Salesforce REST API.
- The default value of `var.real_time_interval` or `var.elf_interval` is 5m/1h. It is important to exercise caution when reducing the interval, as it directly affects the API rate limit of the Salesforce instance. Salesforce API rate limit is ~1000 API calls per hour. Hence if user goes with lower limit of `var.real_time_interval` or `var.elf_interval`, the Salesforce API rate limit will exceed and any additional API requests beyond the limit will result in an error response from the Salesforce API. The error message will typically indicate that the rate limit has been exceeded. Please refer to the following link for the https://developer.salesforce.com/docs/atlas.en-us.salesforce_app_limits_cheatsheet.meta/salesforce_app_limits_cheatsheet/salesforce_app_limits_platform_api.htm[Salesforce API Rate Limit].

include::../include/what-happens.asciidoc[]

include::../include/gs-link.asciidoc[]

[float]
==== `login` fileset settings

Example config:

[source,yaml]
----
- module: salesforce
  login:
    enabled: true
    var.initial_interval: 1d
    var.api_version: 56

    var.authentication:
      jwt_bearer_flow:
        enabled: false
        client.id: "my-client-id"
        client.username: "my.email@here.com"
        client.key_path: client_key.pem
        url: https://login.salesforce.com
      user_password_flow:
        enabled: true
        client.id: "my-client-id"
        client.secret: "my-client-secret"
        token_url: "https://login.salesforce.com"
        username: "my.email@here.com"
        password: "password"

    var.url: "https://instance-url.salesforce.com"

    var.event_log_file: true
    var.elf_interval: 1h
    var.log_file_interval: Hourly

    var.real_time: true
    var.real_time_interval: 5m
----

include::../include/var-paths.asciidoc[]

*`var.initial_interval`*::

The initial interval for the `login` fileset. It defines the time window in which the `login` fileset collects logs of historical data.

*`var.api_version`*::

The API version of the Salesforce instance.

*`var.authentication`*::

Authentication configuration for Salesforce data collection. Current module supports JWT and User-Password authentication flows.

*`var.authentication.jwt_bearer_flow.client.id`*::

The client id for JWT authentication.

*`var.authentication.jwt_bearer_flow.client.username`*::

The username used for JWT authentication.

*`var.authentication.jwt_bearer_flow.client.key_path`*::

Path to the client key for JWT authentication.

*`var.authentication.jwt_bearer_flow.jwt_url`*::

The audience URL for JWT authentication.

*`var.authentication.user_password_flow.client.id`*::

The client id for user-password authentication.

*`var.authentication.user_password_flow.client.secret`*::

The client secret for user-password authentication.

*`var.authentication.user_password_flow.token_url`*::

The token URL for user-password authentication.

*`var.authentication.user_password_flow.username`*::

The username used for user-password authentication.

*`var.authentication.user_password_flow.password`*::

The password used for user-password authentication.

*`var.url`*::

The URL of the Saleforce instance.

*`var.event_log_file`*::

Set to true to enable event log file data collection. Module will use EventLogFile data collection method.

*`var.elf_interval`*::

The Period for fetching event log file data, i.e. 1s/1m/1h.

*`var.log_file_interval`*::

The interval type of EventLogFile data collection. Either Hourly or Daily.

*`var.real_time`*::

Set to true to enable real-time data collection.

*`var.real_time_interval`*::

The Period for fetching real-time data, i.e. 1s/1m/1h.

[float]
==== `logout` fileset settings

Example config:

[source,yaml]
----
- module: salesforce
  logout:
    enabled: true
    var.initial_interval: 1d
    var.api_version: 56

    var.authentication:
      jwt_bearer_flow:
        enabled: false
        client.id: "my-client-id"
        client.username: "my.email@here.com"
        client.key_path: client_key.pem
        url: https://login.salesforce.com
      user_password_flow:
        enabled: true
        client.id: "my-client-id"
        client.secret: "my-client-secret"
        token_url: "https://login.salesforce.com"
        username: "my.email@here.com"
        password: "password"

    var.url: "https://instance-url.salesforce.com"

    var.event_log_file: true
    var.elf_interval: 1h
    var.log_file_interval: Hourly

    var.real_time: true
    var.real_time_interval: 5m
----

include::../include/var-paths.asciidoc[]

*`var.initial_interval`*::

The initial interval for the `logout` fileset. It defines the time window in which the `logout` fileset collects logs of historical data.

*`var.api_version`*::

The API version of the Salesforce instance.

*`var.authentication`*::

Authentication configuration for Salesforce data collection. Current module supports JWT and User-Password authentication flows.

*`var.authentication.jwt_bearer_flow.client.id`*::

The client id for JWT authentication.

*`var.authentication.jwt_bearer_flow.client.username`*::

The username used for JWT authentication.

*`var.authentication.jwt_bearer_flow.client.key_path`*::

Path to the client key for JWT authentication.

*`var.authentication.jwt_bearer_flow.jwt_url`*::

The audience URL for JWT authentication.

*`var.authentication.user_password_flow.client.id`*::

The client id for user-password authentication.

*`var.authentication.user_password_flow.client.secret`*::

The client secret for user-password authentication.

*`var.authentication.user_password_flow.token_url`*::

The token URL for user-password authentication.

*`var.authentication.user_password_flow.username`*::

The username used for user-password authentication.

*`var.authentication.user_password_flow.password`*::

The password used for user-password authentication.

*`var.url`*::

The URL of the Saleforce instance.

*`var.event_log_file`*::

Set to true to enable event log file data collection. Module will use EventLogFile data collection method.

*`var.elf_interval`*::

The Period for fetching event log file data, i.e. 1s/1m/1h.

*`var.log_file_interval`*::

The interval type of EventLogFile data collection. Either Hourly or Daily.

*`var.real_time`*::

Set to true to enable real-time data collection.

*`var.real_time_interval`*::

The Period for fetching real-time data, i.e. 1s/1m/1h.

[float]
==== `setupaudittrail` fileset settings

Example config:

[source,yaml]
----
- module: salesforce
  setupaudittrail:
    enabled: true
    var.initial_interval: 1d
    var.api_version: 56

    var.authentication:
      jwt_bearer_flow:
        enabled: false
        client.id: "my-client-id"
        client.username: "my.email@here.com"
        client.key_path: client_key.pem
        url: https://login.salesforce.com
      user_password_flow:
        enabled: true
        client.id: "my-client-id"
        client.secret: "my-client-secret"
        token_url: "https://login.salesforce.com"
        username: "my.email@here.com"
        password: "password"

    var.url: "https://instance-url.salesforce.com"

    var.real_time: true
    var.real_time_interval: 5m
----

include::../include/var-paths.asciidoc[]

*`var.initial_interval`*::

The initial interval for the `logout` fileset. It defines the time window in which the `logout` fileset collects logs of historical data.

*`var.api_version`*::

The API version of the Salesforce instance.

*`var.authentication`*::

Authentication configuration for Salesforce data collection. Current module supports JWT and User-Password authentication flows.

*`var.authentication.jwt_bearer_flow.client.id`*::

The client id for JWT authentication.

*`var.authentication.jwt_bearer_flow.client.username`*::

The username used for JWT authentication.

*`var.authentication.jwt_bearer_flow.client.key_path`*::

Path to the client key for JWT authentication.

*`var.authentication.jwt_bearer_flow.jwt_url`*::

The audience URL for JWT authentication.

*`var.authentication.user_password_flow.client.id`*::

The client id for user-password authentication.

*`var.authentication.user_password_flow.client.secret`*::

The client secret for user-password authentication.

*`var.authentication.user_password_flow.token_url`*::

The token URL for user-password authentication.

*`var.authentication.user_password_flow.username`*::

The username used for user-password authentication.

*`var.authentication.user_password_flow.password`*::

The password used for user-password authentication.

*`var.url`*::

The URL of the Saleforce instance.

*`var.real_time`*::

Set to true to enable real-time data collection.

*`var.real_time_interval`*::

The Period for fetching real-time data, i.e. 1s/1m/1h.

[float]
==== `apex` fileset settings

Example config:

[source,yaml]
----
- module: salesforce
  apex:
    enabled: true
    var.initial_interval: 1d
    var.log_file_interval: Hourly
    var.api_version: 56

    var.authentication:
      jwt_bearer_flow:
        enabled: false
        client.id: "my-client-id"
        client.username: "my.email@here.com"
        client.key_path: client_key.pem
        url: https://login.salesforce.com
      user_password_flow:
        enabled: true
        client.id: "my-client-id"
        client.secret: "my-client-secret"
        token_url: "https://login.salesforce.com"
        username: "my.email@here.com"
        password: "password"

    var.url: "https://instance-url.salesforce.com"

    var.event_log_file: true
    var.elf_interval: 1h
    var.log_file_interval: Hourly
----

include::../include/var-paths.asciidoc[]

*`var.initial_interval`*::

The initial interval for the `logout` fileset. It defines the time window in which the `logout` fileset collects logs of historical data.

*`var.api_version`*::

The API version of the Salesforce instance.

*`var.authentication`*::

Authentication configuration for Salesforce data collection. Current module supports JWT and User-Password authentication flows.

*`var.authentication.jwt_bearer_flow.client.id`*::

The client id for JWT authentication.

*`var.authentication.jwt_bearer_flow.client.username`*::

The username used for JWT authentication.

*`var.authentication.jwt_bearer_flow.client.key_path`*::

Path to the client key for JWT authentication.

*`var.authentication.jwt_bearer_flow.jwt_url`*::

The audience URL for JWT authentication.

*`var.authentication.user_password_flow.client.id`*::

The client id for user-password authentication.

*`var.authentication.user_password_flow.client.secret`*::

The client secret for user-password authentication.

*`var.authentication.user_password_flow.token_url`*::

The token URL for user-password authentication.

*`var.authentication.user_password_flow.username`*::

The username used for user-password authentication.

*`var.authentication.user_password_flow.password`*::

The password used for user-password authentication.

*`var.url`*::

The URL of the Saleforce instance.

*`var.event_log_file`*::

Set to true to enable event log file data collection. Module will use EventLogFile data collection method.

*`var.elf_interval`*::

The Period for fetching event log file data, i.e. 1s/1m/1h.

*`var.log_file_interval`*::

The interval type of EventLogFile data collection. Either Hourly or Daily.

[float]
=== Example dashboard

This Salesforce module comes with several predefined dashboards, including Login, Logout, Apex, and Setup Audit Trails Dashboards. For example:

image::./images/filebeat-salesforce-login-dashboard.png[]

image::./images/filebeat-salesforce-logout-dashboard.png[]

:has-dashboards!: 

:fileset_ex!:

:modulename!:


[float]
=== Fields

For a description of each field in the module, see the
<<exported-fields-salesforce,exported fields>> section.

:edit_url!: