# yaml-language-server: $schema=https://raw.githubusercontent.com/buildkite/pipeline-schema/main/schema.json

env:
  SETUP_GVM_VERSION: "v0.5.1"
  IMAGE_UBUNTU_X86_64: "family/core-ubuntu-2204"
  IMAGE_UBUNTU_ARM_64: "core-ubuntu-2004-aarch64"

steps:
  - group: ":linux: Testing on Linux"
    key: "staging"
#    if: build.pull_request.labels includes \"filebeat\"

    steps:
      - label: ":linux: Test Filebeat: ARM"
        command: echo "THIS IS MSG ${GITHUB_PR_TRIGGER_COMMENT}"
#        if: build.pull_request.labels includes \"arm\"
#        notify:
#          - github_commit_status:
#              context: "Test Filebeat/ARM"
        agents:
          provider: "aws"
          imagePrefix: "${IMAGE_UBUNTU_ARM_64}"
          instanceType: "t4g.large"
