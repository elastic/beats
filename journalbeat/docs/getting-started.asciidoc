:release-state: released

//TODO: Remove release-state definition before merging.

[id="{beatname_lc}-getting-started"]
== Get started with {beatname_uc}

++++
<titleabbrev>Get started</titleabbrev>
++++

This guide describes how to get started quickly with log data collection from
systemd journals. You'll learn how to:

* install {beatname_uc} on each system you want to monitor
* specify the location of your log files
* parse log data into fields and send it to {es}
* visualize the log data in {kib}

//TODO: Move up dashboard.

[float]
=== Before you begin

You need {es} for storing and searching your data, and {kib} for visualizing and
managing it.

// TODO: We might want to provide the instructions for spinning up a deployment
// here. See
// https://github.com/elastic/docs/pull/1815/files#diff-934228d98950ff95c8c53444966daeaeR10
// Or link to the topic that's available for cloud.

include::{libbeat-dir}/tab-widgets/spinup-stack-widget.asciidoc[]

[float]
[id="{beatname_lc}-installation"]
=== Step 1: Install {beatname_uc}

Install {beatname_uc} on all the servers you want to monitor.

To download and install {beatname_uc}, use the commands that work with your
system:

include::{libbeat-dir}/tab-widgets/install-widget-deb-rpm-linux.asciidoc[]

[float]
[[other-installation-options]]
==== Other installation options

* <<setup-repositories>>
* https://www.elastic.co/downloads/beats/{beatname_lc}[Download page] 
* <<running-on-docker>>

[float]
[[set-connection]]
=== Step 2: Set the connection information

include::{libbeat-dir}/shared/connecting-to-es.asciidoc[]


[float]
[id="{beatname_lc}-configuration"]
=== Step 3: Configure {beatname_uc}

Before running {beatname_uc}, specify the location of the systemd journal files
and configure how you want the files to be read. If you accept the default
configuration, {beatname_uc} reads from the local journal.

. Specify a list of paths to your systemd journal files. Each path can be a
directory path (to collect events from all journals in a directory), or a file
path. For example:
+
["source","sh",subs="attributes"]
----
{beatname_lc}.inputs:
- paths:
  - "/dev/log"
  - "/var/log/messages/my-journal-file.journal"
  seek: head
----
+
If no paths are specified, {beatname_uc} reads from the default journal.

. Set the <<seek,`seek`>> option to control the position where
{beatname_uc} starts reading the journal. The available options are `head`,
`tail`, and `cursor`. The default is `cursor`, which means that on first read,
{beatname_uc} starts reading at the beginning of the file, but continues reading
at the last known position after a reload or restart. For more detail about
the settings, see the reference docs for the
<<seek,`seek` option>>.

. (Optional) Set the <<include-matches,`include_matches`>> option
to filter entries in journald before collecting any log events. This reduces the
number of events that {beatname_uc} needs to process. For example, to fetch only
Redis events from a Docker container tagged as `redis`, use:
+
["source","sh",subs="attributes"]
----
{beatname_lc}.inputs:
- paths: []
  include_matches:
    - "CONTAINER_TAG=redis"
    - "_COMM=redis"
----

include::{libbeat-dir}/step-look-at-config.asciidoc[]

[float]
[[setup-assets]]
=== Step 4: Set up assets

include::{libbeat-dir}/shared/setup.asciidoc[]

[float]
[id="{beatname_lc}-starting"]
=== Step 5: Start {beatname_uc}

Before starting {beatname_uc}, modify the user credentials in
+{beatname_lc}.yml+ and specify a user who has restricted privileges,
especially if you're running {beatname_uc} in a production environment.
For more information, see <<privileges-to-publish-events>>.

To start {beatname_uc}, run:

include::{libbeat-dir}/tab-widgets/start-widget-deb-rpm-linux.asciidoc[]

{beatname_uc} is now ready to send journal events to the {es}.

[float]
[[view-kibana-dashboards]]
=== Step 6: View your data in {kib}

The {beatname_uc} dashboard is currently broken. To start exploring your data,
go to the Discover app in {kib}. From there, you can submit search queries,
filter the search results, and view document data.

To learn how to build visualizations and dashboards to view your data, see the
_{kibana-ref}/index.html[{kib} User Guide]_.


[float]
=== What's next?

include::{libbeat-dir}/shared/obs-apps.asciidoc[tag=obs-intro]

include::{libbeat-dir}/shared/obs-apps.asciidoc[tag=add-metrics]

include::{libbeat-dir}/shared/obs-apps.asciidoc[tag=add-logs]

include::{libbeat-dir}/shared/obs-apps.asciidoc[tag=add-uptime]

include::{libbeat-dir}/shared/obs-apps.asciidoc[tag=add-apm]

include::{libbeat-dir}/shared/obs-apps.asciidoc[tag=obs-apps]


The Logs app shows logs
from `filebeat-*` indices by default. To show {beatname_uc} indices, configure
the source to include `journalbeat-*`. You can do this in the Logs app when you
configure the source, or you can modify the {kib} configuration. For example:
+
[source,yaml]
----
xpack.infra:
 sources:
   default:
     logAlias: "filebeat-*,journalbeat-*"
----
